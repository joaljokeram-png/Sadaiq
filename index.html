<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <title>Ø´Ø§Øª ØµØ¯Ù‰ Ø§Ù„Ø¹Ø±Ø§Ù‚ Ø§Ù„Ù…Ù„ÙƒÙŠ ðŸ‘‘</title>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <style>
        /* Ø¶Ø¹ Ù‡Ù†Ø§ ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„Ù€ CSS Ø§Ù„ØªÙŠ ØµÙ…Ù…Ù†Ø§Ù‡Ø§ Ø³Ø§Ø¨Ù‚Ø§Ù‹ */
        :root { --gold: #d4af37; --bg: #121212; }
        body { background: var(--bg); color: white; font-family: sans-serif; direction: rtl; }
        #chat-container { display: flex; height: 90vh; }
        #messages { flex: 1; overflow-y: auto; padding: 20px; border: 1px solid var(--gold); }
        .msg { margin-bottom: 10px; display: flex; align-items: center; gap: 10px; }
        .msg img { width: 40px; height: 40px; border-radius: 50%; border: 1px solid var(--gold); }
    </style>
</head>
<body>
    <h2 style="text-align:center; color:var(--gold);">ØµØ¯Ù‰ Ø§Ù„Ø¹Ø±Ø§Ù‚ Ø§Ù„Ù…Ù„ÙƒÙŠ ðŸ‘‘</h2>
    <div id="chat-container">
        <div id="messages"></div>
    </div>
    <div style="padding:10px; display:flex; gap:10px;">
        <input type="text" id="msgInp" style="flex:1; padding:10px;" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ...">
        <button onclick="sendMsg()" style="background:var(--gold); border:none; padding:10px 20px; cursor:pointer;">Ø¥Ø±Ø³Ø§Ù„</button>
    </div>

    <script>
        // âš ï¸ Ø§Ø³ØªØ¨Ø¯Ù„ Ø§Ù„Ø±Ø§Ø¨Ø· Ø£Ø¯Ù†Ø§Ù‡ Ø¨Ø±Ø§Ø¨Ø· Ø§Ù„Ù€ Live Ø§Ù„Ø°ÙŠ Ø³ÙŠØ¹Ø·ÙŠÙƒ Ø¥ÙŠØ§Ù‡ Render
        const socket = io('https://sadaiq.onrender.com');

        let user = "Ø³ÙƒØ±Ø§Øª Ø§Ù„Ù…ÙˆØª"; // ÙŠÙ…ÙƒÙ† ØªØºÙŠÙŠØ±Ù‡ Ù„ÙŠØ£Ø®Ø° Ù…Ù† Ù†Ø¸Ø§Ù… Ø§Ù„Ø¯Ø®ÙˆÙ„
        let myRank = "ØµØ§Ø­Ø¨ Ø§Ù„Ù…ÙˆÙ‚Ø¹";
        let myAvatar = "https://cdn-icons-png.flaticon.com/512/149/149071.png";

        socket.emit('join', { user, rank: myRank, avatar: myAvatar, room: "Ø§Ù„Ø¹Ø§Ù…Ø©" });

        function sendMsg() {
            const text = document.getElementById('msgInp').value;
            if(!text) return;
            socket.emit('message', { user, text, rank: myRank, avatar: myAvatar, room: "Ø§Ù„Ø¹Ø§Ù…Ø©", style: {textColor: "#fff"} });
            document.getElementById('msgInp').value = "";
        }

        socket.on('new_message', (data) => {
            const msgBox = document.getElementById('messages');
            msgBox.innerHTML += `
                <div class="msg">
                    <img src="${data.avatar}">
                    <div>
                        <b style="color:var(--gold)">${data.user}:</b>
                        <span>${data.text}</span>
                        <small style="color:gray; font-size:10px;">${data.time}</small>
                    </div>
                </div>`;
            msgBox.scrollTop = msgBox.scrollHeight;
        });
    </script>
</body>
</html>
